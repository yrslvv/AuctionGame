(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,a){e.exports=a(39)},32:function(e,t,a){},33:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(23),l=a.n(r),s=(a(32),a(18)),o=a(3),i=a(40);a(33);var u=e=>{let{setUsername:t}=e;const[a,r]=Object(n.useState)(""),[l,s]=Object(n.useState)(2),u=Object(o.o)();return c.a.createElement("div",{className:"registration-container"},c.a.createElement("h1",null,"Enter the Auction"),c.a.createElement("form",{onSubmit:async e=>{e.preventDefault(),t(a);try{(await i.a.get("http://localhost:5000/api/auction")).data?u("/auction"):(await i.a.post("http://localhost:5000/api/auction",{duration:l}),u("/auction"))}catch(n){console.error(n)}}},c.a.createElement("input",{type:"text",value:a,onChange:e=>r(e.target.value),placeholder:"Enter your username",required:!0}),c.a.createElement("input",{type:"number",value:l,onChange:e=>s(e.target.value),placeholder:"Duration (minutes)",required:!0}),c.a.createElement("button",{type:"submit"},"Join Auction")),c.a.createElement("button",{onClick:async()=>{try{await i.a.delete("http://localhost:5000/api/auction"),alert("Current auction deleted")}catch(e){console.error(e)}},className:"delete-button"},"Delete Current Auction"))},m=a(25);a(37);var d=e=>{let{username:t,onGifSelect:a}=e;const[r,l]=Object(n.useState)(""),[s,o]=Object(n.useState)([]);return Object(n.useEffect)(()=>{const e=setTimeout(()=>{(async()=>{if(""!==r.trim())try{const t=`https://tenor.googleapis.com/v2/search?q=${r}&key=AIzaSyCfPz-AXvOA8cnneQlgqNTJPgpyvSNF-1w&client_key=my_test_app&limit=8`;console.log("Search URL:",t);const a=await i.a.get(t);o(a.data.results)}catch(e){console.error("Error fetching GIFs:",e)}else o([])})()},300);return()=>clearTimeout(e)},[r]),c.a.createElement("div",{className:"gif-search-container"},c.a.createElement("input",{type:"text",value:r,onChange:e=>l(e.target.value),placeholder:"Search GIFs"}),c.a.createElement("div",{className:"gif-results"},s.map(e=>c.a.createElement("img",{key:e.id,src:e.media_formats.nanogif.url,alt:e.content_description,onClick:()=>a(e.media_formats.gif.url,t),className:"gif-item"}))))};a(38);const E=Object(m.a)("http://localhost:5000");var p=e=>{let{username:t}=e;const[a,r]=Object(n.useState)(null),[l,s]=Object(n.useState)(0),[o,u]=Object(n.useState)(null),[m,p]=Object(n.useState)(0),[g,h]=Object(n.useState)([]),[f,b]=Object(n.useState)(""),[v,y]=Object(n.useState)(""),N=Object(n.useRef)(null);Object(n.useEffect)(()=>((async()=>{const e=await i.a.get("http://localhost:5000/api/auction");e.data?(r(e.data),e.data.endTime&&p(new Date(e.data.endTime)-new Date)):r(null)})(),E.on("newBid",e=>{r(e)}),E.on("timerUpdate",e=>{p(e)}),E.on("auctionEnd",e=>{u(e)}),E.on("newMessage",e=>{h(t=>[...t,e].slice(-15)),w()}),E.on("messages",e=>{h(e),w()}),E.on("bidError",e=>{y(e)}),E.emit("getMessages"),()=>{E.off("newBid"),E.off("timerUpdate"),E.off("auctionEnd"),E.off("newMessage"),E.off("messages"),E.off("bidError")}),[]);const w=()=>{N.current&&N.current.scrollIntoView({behavior:"smooth"})};if(!a)return c.a.createElement("p",null,"No active auction. Please create a new auction.");if(o)return c.a.createElement("div",{className:"auction-container"},c.a.createElement("h1",null,"Auction Ended"),c.a.createElement("p",null,"Winner: ",o.username||"No bids"," with $",-1!==o.amount?o.amount:0));const S=Math.floor(m/6e4),O=Math.floor(m%6e4/1e3),j=[...a.bids].sort((e,t)=>t.amount-e.amount);return c.a.createElement("div",{className:"auction-container"},c.a.createElement("div",{className:"timer"},S,":",("0"+O).slice(-2)),c.a.createElement("div",{className:"auction-content"},c.a.createElement("img",{src:a.picture,alt:"Auction Item",className:"auction-image"}),c.a.createElement("div",{className:"bidding-section"},c.a.createElement("div",{className:"current-bids"},c.a.createElement("h3",null,"Current Bids"),c.a.createElement("ul",null,j.map((e,t)=>c.a.createElement("li",{key:t},e.username,": $",e.amount))),v&&c.a.createElement("p",{className:"bid-error"},v),c.a.createElement("input",{type:"number",value:l,onChange:e=>s(e.target.value),placeholder:"Enter your bid",className:"bid-input"}),c.a.createElement("button",{onClick:()=>{y(""),E.emit("bid",{auctionId:a._id,username:t,amount:l})},className:"bid-button"},"Place Bid")),c.a.createElement("div",{className:"chat-container"},c.a.createElement("h3",null,"Chat"),c.a.createElement("div",{className:"chat-messages"},g.map((e,t)=>c.a.createElement("div",{key:t},e.message.startsWith("http")?c.a.createElement("img",{src:e.message,alt:"GIF",className:"chat-gif"}):c.a.createElement("div",null,c.a.createElement("strong",null,e.username,": "),c.a.createElement("span",null,e.message)))),c.a.createElement("div",{ref:N})),c.a.createElement("input",{type:"text",value:f,onChange:e=>b(e.target.value),onKeyDown:e=>{"Enter"===e.key&&""!==f.trim()&&(E.emit("sendMessage",{username:t,message:f}),b(""))},placeholder:"Type a message",className:"chat-input"}),c.a.createElement("small",{className:"enter-to-send"},"Press Enter to send message"),c.a.createElement(d,{onGifSelect:e=>{E.emit("sendMessage",{username:t,message:e})}})))))};var g=()=>{const[e,t]=Object(n.useState)("");return c.a.createElement(s.a,null,c.a.createElement(o.c,null,c.a.createElement(o.a,{exact:!0,path:"/",element:c.a.createElement(u,{setUsername:t})}),c.a.createElement(o.a,{path:"/auction",element:c.a.createElement(p,{username:e})})))};var h=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,41)).then(t=>{let{getCLS:a,getFID:n,getFCP:c,getLCP:r,getTTFB:l}=t;a(e),n(e),c(e),r(e),l(e)})};l.a.createRoot(document.getElementById("root")).render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(g,null))),h()}},[[26,1,2]]]);
//# sourceMappingURL=main.45d1bb6b.chunk.js.map